@model Elmah.Web.Models.ErrorLogViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutPage.cshtml";
}

<h1 style="padding-left: 50px">@Model.ApplicationName</h1>

@if (Model.Errors != null && Model.Errors.Count > 0)
{
    if (Model.TotalPage > 1)
    {
        <div class="container">
            Choose page: 
            @for (int i = 1; i < Model.TotalPage + 1; i++)
            {
                if (i == Model.PageNumber)
                {
                    <span>@i</span>
                }
                else
                {
                    <a href="/ErrorLog/?application=@Model.ApplicationName&pageNumber=@i">@i</a>
                }
            }
        </div>
    }
    <div class="result-table">
        <div class="row result-header">
            <div class="col-md-1">
                Host
            </div>
            <div class="col-md-1">
                Code
            </div>
            <div class="col-md-3">
                Type
            </div>
            <div class="col-md-3">
                Error
            </div>
            <div class="col-md-2">
                User
            </div>
            <div class="col-md-2">
                Date
            </div>
        </div>
        @foreach (var error in Model.Errors)
        {
            var userName = error.User.Length > 20 ? error.User.Substring(0, 20) : error.User;
            <div class="row results-row">
                <div class="col-md-1">
                    @error.Host
                </div>
                <div class="col-md-1">
                    @error.StatusCode
                </div>
                <div class="col-md-3" style="font-weight: bold;">
                    @error.Type.Split('.').Last().ToString()
                </div>
                <div class="col-md-3">
                    @error.Message.Substring(0, (error.Message.Length > 50 ? 50 : error.Message.Length))... <a href="/ErrorDisplay/?errorId=@error.Id">details</a>
                </div>
                <div class="col-md-2">
                    @userName
                </div>
                <div class="col-md-2">
                    @error.TimeUtc
                </div>
            </div>
        }
    </div>
}
else
{
    <div class="no-Results">
        No errors found
    </div>
}